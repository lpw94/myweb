<!DOCTYPE html>
<html>
<head>
<script src="js/jquery-1.7.1.min.js"></script>
  <meta charset="utf-8">
  <title>JS Bin联动测试</title>
</head>
<body>
<!-- 复制添加区 #2015/03/23 -->
  <span id="span">    </span>

  <div id="city_add">
    城市：<select onchange="aa(this.id)" name="staff_invcityid" id="staff_invcityid">

      <option value="0">深圳</option>
      <option value="1">广州</option>
      <option value="2">东莞</option>

    <select>
    区：<select name="invareaid" id="staff_invareaid">
      <option value="">--请选择--</option>
    <select>
  </div>
  <a style="cursor: pointer;" id="copy">添加</a>
  
</body>
<ml>
<script type="text/javascript">
  $(document).ready(function(){
    
   

    // 添加城市
    $("#copy").click(function(){
      var lent = $('#span').children('div').length;
     $("#city_add").clone(true).appendTo("#span");  
     $("#city_add:last").attr({id:"city_add"+lent});
     $("#staff_invcityid:last").attr({id:"staff_invcityid"+lent}); 
     $("#staff_invareaid:last").attr({id:"staff_invareaid"+lent});
      
      
    });
    
 });
  
  // 产生涉及的区域
  function aa(a){
    var id_str=a.replace('staff_invcityid','staff_invareaid');
    $('#'+id_str).empty();
    $('#'+id_str).append("<option>--请选择--</option>");
    $('#'+id_str).append("<option>--测试数据1--</option>");
    $('#'+id_str).append("<option>--测试数据2--</option>");
    $('#'+id_str).append("<option>--测试数据3--</option>");
 
    }
    
    /*
    $.ajax({
      type:'post',
      url:'http://192.168.0.108/index.php/Home/Staff/ajaxarea',
      data:{cid:$('#staff_invcityid').val()},
      success:function(data){
        alert('data');
        $('#staff_invareaid').append(data);
      }

    })
    */


</script>
